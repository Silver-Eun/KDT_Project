<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>** Collection Map **</title>
    <script>
      // ** Map
      // 1) 정의
      // => 생성과 초기화
      let myMap = new Map([
        ["a", 111],
        ["b", 222],
        ["c", 333],
      ]);

      console.log(`** Test1 => size = ${myMap.size}, a = ${myMap.get("a")}`);
      myMap.set("a", "aaa"); // 수정
      console.log(`** Test2 => size = ${myMap.size}, a = ${myMap.get("a")}`);
      myMap.set("d", "ddd"); // 추가
      console.log(`** Test3 => size = ${myMap.size}, d = ${myMap.get("d")}`);
      myMap.delete("b"); // 삭제
      console.log(`** Test4 => size = ${myMap.size}, b = ${myMap.get("b")}`);
      // 존재 확인
      console.log(
        `** Test5 => 존재확인 a = ${myMap.has("a")}, k = ${myMap.has("k")}`
      );
      myMap.has("k");

      // 생성 후 초기화
      let sMap = new Map();
      sMap.set("1", "배정현");
      sMap.set("2", "김소라");
      sMap.set("3", "은희상");
      sMap.set("4", "최승호");

      // 2) 활용 : for ~ of
      // => 출력1
      for (const [key, value] of sMap) {
        console.log(`** for1 => key = ${key}, name = ${value}`);
      } // for
      // => 출력2
      for (const ss of sMap) {
        console.log(`** for2 => ss = ${ss}`);
        console.log(`** for3 => ${ss[0]}번 = ${ss[1]}`);
      } // for

      // => 순회 메서드: keys, values, entries(맵의 기본 이터레이터)
      for (let ss of sMap.keys()) {
        console.log(`** for4 => ss = ${ss}`);
      }
      for (let ss of sMap.values()) {
        console.log(`** for5 => ss = ${ss}`);
      }
      for (let ss of sMap.entries()) {
        console.log(`** for6 => ss = ${ss}`);
      }

      // => 모든 엔트리 일괄 삭제
      myMap.clear();
      console.log(`** Test6 => size = ${myMap.size}`); // size = 0

      // ** 활용1 : key가 객체인 경우
      const u1 = { id: "banana1", name: "홍길동1" };
      const u2 = { id: "banana2", name: "홍길동2" };
      const u3 = { id: "banana3", name: "홍길동3" };
      const u4 = { id: "banana4", name: "홍길동4" };

      // => Map 생성
      const uMap = new Map();

      // => 초기화
      uMap.set(u1, "Gold");
      uMap.set(u2, "Silver");
      uMap.set(u3, "Diamond");
      uMap.set(u4, "일반");

      // for ~ of를 이용
      // 1) id, name 출력
      for (let s of uMap.keys()) {
        console.log(`** for6 => id = ${s.id}, name = ${s.name}`);
      }
      // 2) id, 등급(value) 출력
      for (let s of uMap.entries()) {
        console.log(`** for6 => id = ${s[0].id}, value = ${s[1]}`);
      }

      // ** 활용2 : value가 객체인 경우
      // => Student 프로토타입을 작성(속성 : nick, name)
      function Student(nick, name) {
        this.nick = nick;
        this.name = name;
      }
      // => 인스턴스 4개 생성
      const stu1 = new Student("t1", "배정현");
      const stu2 = new Student("t2", "김소라");
      const stu3 = new Student("t3", "은희상");
      const stu4 = new Student("t4", "최승호");
      // => Map에 담기(key : 1 ~ 4, value : Student)
      const stuMap = new Map();

      stuMap.set(1, stu1);
      stuMap.set(2, stu2);
      stuMap.set(3, stu3);
      stuMap.set(4, stu4);
      // 출력1
      for (const [key, value] of stuMap) {
        console.log(`key=${key}, nick=${value.nick}, name=${value.name}`);
      }
      // 출력2
      for (let stu of stuMap.entries()) {
        console.log(`key=${stu[0]}, nick=${stu[1].nick}, name=${stu[1].name}`);
      }
    </script>
  </head>
  <body>
    <pre>
      <h2>** 컬렉션(Collections) 장점 **</h2> 
      => Object, Array를 사용하는 것 보다 최적화된 구현체를 제공
      => ES6 : Map, Set, WeakMap, WeakSet
      
      ** Map **
      => 특징
        - Key - Value의 쌍으로 이루어진 컬렉션
        - key를 사용해서 value를 get, set 할 수 있음
        - key들은 중복될 수 없음 : 하나의 key에는 하나의 value 만 허용
        - key로 사용가능한 데이터 Type 
          : string, symbol(ES6), object, function 등
          : number는 사용불가능
      => 객체와 비교
        - 객체는 속성 추가시 내장 속성과 이름 중복으로 충돌이 일어날 수 있음.
        - 객체는 이터러블 규약을 따르지 않으나 맵은 따름 ( for ~ of 가능 )    
        - 속성의 Key는 항상 문자열 이어야 함. (ES6 에서는 심볼도 가능함)
        - 객체의 속성의 수를 알수 없음.(size나 length 같은 메서드가 없음)
    </pre>
  </body>
</html>

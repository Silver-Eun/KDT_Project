<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>** Ajax와 Promise **</title>
    <script>
      // Test1
      let ajaxP = new Promise((resolve, reject) => {
        // 1.1) Ajax 요청
        let xhrObj = new XMLHttpRequest();
        xhrObj.open("Get", "../html/230719_03_ajaxForm.html");
        // 1.2) response 처리
        xhrObj.onload = () => {
          // 정상실행, 거절(오류)
          if (xhrObj.status == 200) resolve(xhrObj.response);
          else reject(xhrObj.status);
        }; // onload
        // 1.3) 요청실행
        xhrObj.send(null);
      });
      ajaxP
        .then((response) => {
          alert(`** Ajax Test 성공`);
          document.getElementById("resultArea").innerHTML =
            "서버 response =><br>" + response;
        })
        .catch((error) => {
          alert(`** Ajax Test 실패 : status = ${error}`);
        });

      // Test2)
      // ** then(f1, f2)
      // => f1 : 성공
      // => f2 : 실패
      ajaxP
        .then((response) => {
          alert(`** Ajax Test2 성공`);
          document.getElementById("resultArea").innerHTML =
            "서버 response =><br>" + response;
        })
        .catch((error) => {
          alert(`** Ajax Test2 실패 : status = ${error}`);
        });
    </script>
  </head>
  <body>
    <h2>** Ajax와 Promise **</h2>
    <hr />
    <div id="resultArea"></div>
  </body>
</html>
